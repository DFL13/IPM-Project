<!DOCTYPE html>
<html>
    <head>
        <title>IPM</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
    
        <script type="text/javascript">
            var activePreview = null;
            var activeButton = null;

            function openPreview(linkDiv) {
                if (window.innerWidth <= 600) {
                    openFull(linkDiv);
                    return;
                }

                if (linkDiv.getAttribute("data-source") == "")
                    return;

                var prev = getPreviewDiv(linkDiv);
                var button = getButton(linkDiv);

                if (activePreview == prev) {
                    activePreview.style.transitionDelay = "0ms";
                    /*activeButton.style.transitionDelay = "0ms";*/
                    prev.classList.toggle("visiblePreview");
                    button.classList.toggle("btnFullVisible")
                    activePreview = null;
                    return;
                }
                    
                if (activePreview != null) {
                    activePreview.style.transitionDelay = "0ms";
                    /*activeButton.style.transitionDelay = "0ms";*/
                    activePreview.classList.toggle("visiblePreview");
                    activeButton.classList.toggle("btnFullVisible")
                    prev.style.transitionDelay = "500ms";
                    /*button.style.transitionDelay = "500ms";*/
                }

                var frame = getPreviewIframe(prev);
                if (frame.src == "")
                    frame.src = linkDiv.getAttribute("data-source");
                prev.classList.toggle("visiblePreview");
                button.classList.toggle("btnFullVisible")
                activePreview = prev;
                activeButton = button;
            }


            function getPreviewIframe(prev) {
                for (let i=0; i<prev.children.length; i++) {
                    if (prev.children[i].tagName == "IFRAME") {
                        return prev.children[i];
                    }
                }
            }

            function getButton(linkDiv) {
                for(let i=0; i<linkDiv.children.length; i++) {
                    if (linkDiv.children[i].classList.contains("linkHead")) {
                        var head = linkDiv.children[i];
                        for (let j=0; j<head.children.length; j++) {
                            if (head.children[j].tagName == "BUTTON") {
                                return head.children[j];
                            }
                        }
                    }
                }
            }

            function getPreviewDiv(linkDiv) {
                for(let i=0; i<linkDiv.children.length; i++) {
                    if (linkDiv.children[i].classList.contains("preview")) {
                        return linkDiv.children[i];
                    }
                }
            }

            function openFull(linkDiv) {
                window.open(linkDiv.getAttribute("data-source"), "_blank")
            }
        </script>
    </head>


    <body>

        <header>
            <div class="top">
                <h1>Interfaces Pessoa Máquina 2018-19</h1>
                <h2>Grupo 31 - Turno IPM20111326L03</h2>
            </div>

            <div class="profiles">
                <div class="portrait">
                    <img alt="portrait pic 189403" src="images/89403.jpg">
                    <div class="nametag">
                        <p>Alexandre Duarte</p>
                        <p>89403</p>
                    </div>
                </div>
                <div class="portrait">
                    <img alt="portrait pic 189426" src="images/89426.png">
                    <div class="nametag">
                        <p>Daniel Lopes</p>
                        <p>89426</p>
                    </div>
                </div>
                <div class="portrait">
                    <img alt="portrait pic 189504" src="images/89504.jpg">
                    <div class="nametag">
                        <p>Mariana Oliveira</p>
                        <p>89504</p>
                    </div>
                </div>
            </div>
            
        </header>

        <div class="content">
        
            <div id="at" class="section">
                <h2>Análise de Tarefas</h2>
                <div class="linksList">
                    <div class="link" data-source="31A_questionario.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Questionário para análise de tarefas</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="31A_questionario.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Questionário para análise de tarefas (melhorado)</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="31A_relatorio.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Análise de tarefas + Funcionalidades</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="31A_relatorio(melhorado).pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Análise de tarefas + Funcionalidades (melhorados)</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                </div>
            </div>
                
            <div id="mc" class="section">
                <h2>Modelo Conceptual</h2>
                <div class="linksList">
                    <div class="link" data-source="prot_3ecras.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Design de 3 ecrãs</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="storyboard.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Storyboard</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                </div>
            </div>
        
            <div id="proto" class="section">
                <h2>Protótipos</h2>
                <div class="linksList">
                    <div class="link" data-source="pbf.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">PBF</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <!-- <div class="link" data-source="pbf.pdf">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">PBF (melhorado)</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div> -->
                    <div class="link" data-source="prot1/index.html">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Primeiro protótipo funcional</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="prot2/index.html">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Primeiro protótipo funcional completo</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Segundo protótipo funcional</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Segundo protótipo funcional completo</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Protótipo Final</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Protótipo Final completo</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="au" class="section">
                <h2>Avaliação com Utilizadores</h2>
                <div class="linksList">
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Tarefas e Critérios de usabilidade</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Tarefas e Critérios de usabilidade (melhorado)</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Relatório da avaliação com utilizadores</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Relatório da avaliação com utilizadores (melhorado)</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                    <div class="link" data-source="">
                        <div class="linkHead">
                            <h3 onclick="openPreview(this.parentElement.parentElement)">Manual do Utilizador</h3>
                            <button class="btnFull" onclick="openFull(this.parentElement.parentElement)">Open</button>
                        </div>
                        <div class="preview">
                            <iframe></iframe>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
        
    </body>
</html>
